# 7ì¥. ìŠ¤í”„ë§ ì‚¼ê°í˜•ê³¼ ì„¤ì • ì •ë³´

# IOC/DI - ì œì–´ì˜ ì—­ì „ / ì˜ì¡´ì„± ì£¼ì…

- â”**IOC**
    
    ### IOC ( ì œì–´ì˜ ì—­ì „ )ë€?
    
    - ì˜¤ë¸Œì íŠ¸ ìƒì„±, ê´€ê³„ì„¤ì •, ì‚¬ìš©, ì œê±° ë“± ì˜¤ë¸Œì íŠ¸ ì „ë°˜ì— ê±¸ì¹œ ëª¨ë“  ì œì–´ê¶Œì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ê°–ëŠ”ê²Œ ì•„ë‹ˆë¼ **í”„ë ˆì„ì›Œí¬ì˜ ì»¨í…Œì´ë„ˆ(ì™¸ë¶€)ì—ê²Œ ë„˜ê¸°ëŠ” ê°œë…**
    
          ğŸ‘‰ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë§Œì˜ ê°œë…ì´ ì•„ë‹˜, ëŒ€ë¶€ë¶„ì˜ í”„ë ˆì„ì›Œí¬ì—ì„œ IOC ì ìš©
    
    - ê°œë°œìê°€ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì˜ì¡´ê´€ê³„ë¥¼ ë§ºì–´ì¤„ í•„ìš”ê°€ ì—†ìŒ
    
    ### IOCì˜ ì¥ì 
    
    - ê°ì²´ ê°„ ê²°í•©ë„ ë‚®ì¶¤
    - ìœ ì—°í•œ ì½”ë“œ ì‘ì„±
    - ìœ ì§€ ë³´ìˆ˜ ìš©ì´
    - ì½”ë“œ ì¤‘ë³µ ë°©ì§€
    
    < ê¸°ì¡´ >
    
    1. ê°ì²´ ìƒì„±
    2. ì˜ì¡´ì„± ê°ì²´ ìƒì„±
        
         - **í´ë˜ìŠ¤ ë‚´ë¶€**ì—ì„œ ìƒì„±
        
    3. ì˜ì¡´ì„± ê°ì²´ ë©”ì†Œë“œ í˜¸ì¶œ
    
     < ìŠ¤í”„ë§ >
    
    1. ê°ì²´ ìƒì„±
    2. ì˜ì¡´ì„± ê°ì²´ ì£¼ì…
        
        -ì œì–´ê¶Œì„ ìŠ¤í”„ë§ì—ê²Œ ìœ„ì„í•˜ì—¬ **ìŠ¤í”„ë§ì»¨í…Œì´ë„ˆì—ì„œ  ìƒì„±í•´ ë†“ì€ ê°ì²´**ë¥¼ ì£¼ì…
        
    3. ì˜ì¡´ì„± ê°ì²´ ë©”ì†Œë“œ í˜¸ì¶œ
    
    ### IOC & DI & DIP
    
    ![Untitled](7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%A1%E1%86%B7%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A7%E1%86%BC%E1%84%80%E1%85%AA%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%BC%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%206b510317b6dc4c27af0ac71824a3df09/Untitled.png)
    
    - **DI** ( ì˜ì¡´ì„± ì£¼ì… ) : í•„ìš”ë¡œ í•˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ìŠ¤ìŠ¤ë¡œ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì™¸ë¶€ë¡œ ë¶€í„° ì£¼ì…ë°›ëŠ” ê¸°ë²•
    - **DIP** ( ì˜ì¡´ê´€ê³„ ì—­ì „ ë²•ì¹™ ) : SOLID ì›ì¹™ ì¤‘ í•˜ë‚˜. ìì‹ ë³´ë‹¤ ë³€í•˜ê¸° ì‰¬ìš´ ê²ƒì— ì˜ì¡´í•˜ë˜ ê²ƒì„ ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ë‚˜ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ ë‘ì–´ ë³€í™”ì— ì˜í–¥ ë°›ì§€ ì•Šê²Œ í•˜ëŠ” ê²ƒ
    - IOCì™€ DI
        - **IOC**ëŠ” í”„ë¡œê·¸ë¨ ì œì–´ê¶Œì„ ì—­ì „ì‹œí‚¤ëŠ” ê°œë…
        
              **DI**ëŠ” í•´ë‹¹ ê°œë…ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ë””ìì¸ íŒ¨í„´ ì¤‘ í•˜ë‚˜ 
        
              ì¦‰, IOC ê°œë…ì´ ì ìš©ëœ ê²°ê³¼ë¬¼ ì¤‘ í•˜ë‚˜
        
    - DIPì™€ DI
        
        DIëŠ” DIPë¥¼ êµ¬í˜„í•˜ëŠ” ê¸°ë²•ì¤‘ í•˜ë‚˜
        
    
    [https://medium.com/sjk5766/dependency-injection-ioc-dip-ioc-containerì •ë¦¬-310885cca412](https://medium.com/sjk5766/dependency-injection-ioc-dip-ioc-container%EC%A0%95%EB%A6%AC-310885cca412)
    
    [https://black-jin0427.tistory.com/194](https://black-jin0427.tistory.com/194)
    
    ---
    

### ğŸ“Œì§ì ‘ ì˜ì¡´ì„± í•´ê²°

- Car ê°ì²´ê°€ Tireë¥¼ ì§ì ‘ ìƒì‚°í•˜ì—¬ Tireì— ëŒ€í•œ ì˜ì¡´ì„± ìì²´ì ìœ¼ë¡œ í•´ê²°

## ìŠ¤í”„ë§ ì—†ì´ ì˜ì¡´ì„± ì£¼ì…

---

### ğŸ“Œìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

- ì£¼ì…ì´ë€?
ìë™ì°¨ ë‚´ë¶€ì—ì„œ íƒ€ì´ì–´ë¥¼ ìƒì‚°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì™¸ë¶€ì—ì„œ ìƒì‚°ëœ íƒ€ì´ì–´ë¥¼ ìë™ì°¨ì— ì¥ì°©í•˜ëŠ” ì‘ì—…ì´ ì£¼ì…
- ì§ì ‘ ì˜ì¡´ì„± í•´ê²°ì˜ ì½”ë“œëŠ” Carê°€ Tireë¥¼ ì§ì ‘ ê²°ì •í–ˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” Driverê°€ ê²°ì •

      ğŸ‘‰ ìœ ì—°ì„±, í™•ì¥ì„± ì¢‹ì•„ì§ 

Car.java

```jsx
public class Car {
	Tire tire;

	public Car(Tire tire) {
		this.tire = tire; 
	}

	public String getTireBrand() {
		return "ì¥ì°©ëœ íƒ€ì´ì–´: " + tire.getBrand();
	}
}
```

Driver.java

```jsx
public class Driver {
	public static void main(String[] args) {
		Tire tire = new KoreaTire();
		//Tire tire = new AmericaTire();
		Car car = new Car(tire);

		System.out.println(car.getTireBrand());
	}
}
```

### ğŸ“Œ ì†ì„±ì„ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

- Car.javaì— ì†ì„± ì ‘ê·¼ì ë° ì„¤ì •ì ë©”ì„œë“œ ì‚¬ìš©

Car.java

```jsx
public class Car {
	Tire tire;

	public Tire getTire() {
		return tire;
	}

	public void setTire(Tire tire) {
		this.tire = tire;
	}

	public String getTireBrand() {
		return "ì¥ì°©ëœ íƒ€ì´ì–´: " + tire.getBrand();
	}
}
```

Driver.java

```jsx
public class Driver {
	public static void main(String[] args) {
		Tire tire = new KoreaTire();
		Car car = new Car();
		car.setTire(tire);

		System.out.println(car.getTireBrand());
	}
}
```

## ìŠ¤í”„ë§ì„ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

---

### ğŸ“Œ XML íŒŒì¼ ì‚¬ìš©

- ìë°”ì½”ë“œì—ì„œ íƒ€ì´ì–´ ë¸Œëœë“œë¥¼ ì§€ì •í•˜ëŠ” ë¶€ë¶„ ì—†ì´, XMLíŒŒì¼ì—ì„œ ì§€ì • í•´ì¤€ë‹¤.

       ë”°ë¼ì„œ, ì¬ì»´íŒŒì¼/ì¬ë°°í¬ í•˜ì§€ì•Šì•„ë„ XMLíŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤. 

- **ì¢…í•© ì‡¼í•‘ëª°**ì˜ ì—­í• ì„ í•˜ëŠ” **ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬** ì´ìš©

Driver.java

```jsx
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;

public class Driver {
	public static void main(String[] args) 
		ApplicationContext context = new ClassPathXmlApplicationContext("expert002/expert002.xml");//ì¢…í•©ì‡¼í•‘ëª°

		Car car = context.getBean("car", Car.class); // ì¢…í•©ì‡¼í•‘ëª°ì—ì„œ ìƒí’ˆì„ êµ¬ë§¤í•˜ëŠ” ì½”ë“œ
		Tire tire = context.getBean("tire", Tire.class);

		car.setTire(tire);

		System.out.println(car.getTireBrand());
	}
}
```

## ğŸ“Œ ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼(XML)ì—ì„œ ì†ì„± ì£¼ì…

- XMLíŒŒì¼ì—ì„œ íƒ€ì´ì–´ êµ¬ë§¤ ë° íƒ€ì´ì–´ ì†ì„±ì— ê²°í•©

```jsx
<bean id = "koreaTire" class ="expert003.KoreaTire"></bean> //Tire tire = context.getBean("tire",Tire.class);

<bean id="car" class="expert003.Car">
		<property name="tire" ref="koreaTire"></property> //car.setTire(tire);

```

### ğŸ“Œ@Autowiredë¥¼ í†µí•œ ì†ì„± ì£¼ì…

- importë¬¸ê³¼ @Autowired ì• ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ì—¬ **ì„¤ì •ì ë©”ì„œë“œ ì—†ì´**ë„ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ê°€ ì„¤ì • íŒŒì¼ì„ í†µí•´ ì†ì„±ì„ ì£¼ì…í•´ì¤€ë‹¤
- @Autowired ëŠ” **type ê¸°ì¤€ ë§¤ì¹­**, ê°™ì€ íƒ€ì…ì„ êµ¬í˜„í•œ ì—¬ëŸ¬ í´ë˜ìŠ¤ê°€ ìˆì„ ê²½ìš°, **bean íƒœê·¸ì˜ id**ë¡œ êµ¬ë¶„í•˜ì—¬ ë§¤ì¹­

![Untitled](7%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%89%E1%85%B3%E1%84%91%E1%85%B3%E1%84%85%E1%85%B5%E1%86%BC%20%E1%84%89%E1%85%A1%E1%86%B7%E1%84%80%E1%85%A1%E1%86%A8%E1%84%92%E1%85%A7%E1%86%BC%E1%84%80%E1%85%AA%20%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%BC%20%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%87%E1%85%A9%206b510317b6dc4c27af0ac71824a3df09/Untitled%201.png)

### ğŸ“Œ @Resourceë¥¼ í†µí•œ ì†ì„± ì£¼ì…

- **ìë°” í‘œì¤€ ì–´ë…¸í…Œì´ì…˜**ìœ¼ë¡œ ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ ì‚¬ìš©ê°€ëŠ¥
- typeê³¼ idì¤‘ **id**ì˜ ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ìŒ
- ìœ ì§€ë³´ìˆ˜ì— ë¬´ê´€í•œ ê´€ê³„ë¼ë©´ @Resourceë¥¼, ìœ ì§€ë³´ìˆ˜ì™€ ë°€ì ‘í•˜ê±°ë‚˜ ìì£¼ ë³€ê²½ë˜ëŠ” ê´€ê³„ë¼ë©´ <property>ì‚¬ìš© ì¶”ì²œ

## AOP ( Aspect-Oriented Programming )

---

- ìŠ¤í”„ë§ì˜ AOP = ë¡œì§(Code) ì£¼ì…
- ì½”ë“œ = í•µì‹¬ ê´€ì‹¬ì‚¬(ëª¨ë“ˆë³„ë¡œ ë‹¤ë¦„) + íš¡ë‹¨ ê´€ì‹¬ì‚¬(ë°˜ë³µê³¼ ì¤‘ë³µ)

### ğŸ“Œíš¡ë‹¨ê´€ì‹¬ì‚¬ ë¶„ë¦¬ ì˜ˆì œ ì½”ë“œ & ì„¤ëª…

- AOPì ìš©ì„ ìœ„í•´ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ [Boy.java](http://Boy.java) ë³€ê²½ â†’ Person ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ & Boy.javaì—ì„œ íš¡ë‹¨ê´€ì‹¬ì‚¬ ì‚­ì œ
- @Aspect : ì´ í´ë˜ìŠ¤ë¥¼ AOPì—ì„œ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
    
    @Before : ëŒ€ìƒ ë©”ì„œë“œ ì‹¤í–‰ ì „ì— ì´ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ê² ë‹¤ëŠ” ì˜ë¯¸
    

| AOP ì ìš© ì „ | AOP ì ìš© í›„ |
| --- | --- |
| package aop001;

public class Boy {
Â public void housework( {Â Â System.out.println("ì—´ì‡ ë¡œ ë¬¸ì„ ì—´ê³  ì§‘ì— ë“¤ì–´ê°„ë‹¤.");Â Â Â Â 
try {Â Â Â System.out.println("ì»´í“¨í„°ë¡œ ê²Œì„ì„ í•œë‹¤.");Â Â } catch (Exception ex {Â Â Â if(ex.getMessage().equals("ì§‘ì— ë¶ˆë‚¨")) {Â Â Â Â System.out.println("119 ì— ì‹ ê³ í•œë‹¤.");Â Â Â }Â Â Â Â Â } finally {Â 
Â Â System.out.println("ì†Œë“±í•˜ê³  ì”ë‹¤.");Â Â 
}Â Â Â 
Â System.out.println("ìë¬¼ì‡ ë¥¼ ì ê·¸ê³  ì§‘ì„ ë‚˜ì„ ë‹¤.");Â }} | package aop002;

public class BoyÂ implements IPersonÂ 
{Â public void housework() {Â Â System.out.println("ì»´í“¨í„°ë¡œ ê²Œì„ì„ í•œë‹¤.");Â }
} |
| package aop001;

public class Girl {Â 
public void housework() {Â Â System.out.println("ì—´ì‡ ë¡œ ë¬¸ì„ ì—´ê³  ì§‘ì— ë“¤ì–´ê°„ë‹¤.");Â Â Â Â 
try {Â Â Â System.out.println("ìš”ë¦¬ë¥¼ í•œë‹¤.");Â Â } 
catch (Exception ex) {Â Â Â if(ex.getMessage().equals("ì§‘ì— ë¶ˆë‚¨")) {Â Â Â Â System.out.println("119 ì— ì‹ ê³ í•œë‹¤.");Â Â Â }Â Â Â Â Â } finally {Â 
Â Â System.out.println("ì†Œë“±í•˜ê³  ì”ë‹¤.");Â Â 
}Â Â Â 
Â System.out.println("ìë¬¼ì‡ ë¥¼ ì ê·¸ê³  ì§‘ì„ ë‚˜ì„ ë‹¤.");Â }} | package aop002;

public class GirlÂ implements IPerson
Â {Â public void housework() {Â Â System.out.println("ìš”ë¦¬ë¥¼ í•œë‹¤.");Â }
} |
|  | package aop002;
public interface IPerson {Â void housework();} |
|  | package aop002;
import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
@Aspect public class MyAspect {Â @Before("execution(* housework())")Â 
public void before(JoinPoint joinPoint){Â Â System.out.println("ì–¼êµ´ ì¸ì‹ í™•ì¸: ë¬¸ì„ ê°œë°©í•˜ë¼");Â Â 
//System.out.println("ì—´ì‡ ë¡œ ë¬¸ì„ ì—´ê³  ì§‘ì— ë“¤ì–´ê°„ë‹¤.");Â }
} |
| package aop001;

public class Start {Â 
public static void main(String[] args) {Â 
Boy romeo = new Boy();Â Â 
Girl juliet = new Girl();Â Â Â 
Â romeo.housework();Â 
Â juliet.housework();Â }
} | package aop002;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.FileSystemXmlApplicationContext;

public class Start {
Â public static void main(String[] args) {Â Â ApplicationContext context = new FileSystemXmlApplicationContext("/src/main/java/aop002/expert.xml");Â Â Â Â 
IPerson romeo = (IPerson)context.getBean("boy");Â Â 
IPerson juliet = (IPerson)context.getBean("girl");
Â Â romeo.housework();Â Â 
  juliet.housework();Â }
} |
|  | <?xml version="1.0" encoding="UTF-8"?><beans xmlns="http://www.springframework.org/schema/beans"Â 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"Â 
xmlns:aop="http://www.springframework.org/schema/aop"Â 
xsi:schemaLocation="http://www.springframework.org/schema/aopÂ http://www.springframework.org/schema/aop/spring-aop-3.1.xsdÂ Â http://www.springframework.org/schema/beansÂ http://www.springframework.org/schema/beans/spring-beans.xsd">Â 
<aop:aspectj-autoproxy />Â Â 
Â <bean id="myAspect" class="aop002.MyAspect" />Â 
<bean id="boy" class="aop002.Boy" />
Â <bean id="girl" class="aop002.Girl" /></beans> |
- ì´ˆë¡ìƒ‰ ë¶€ë¶„ì´ ì‚¬ë¼ì§„ ì´ìœ  : íš¡ë‹¨ ê´€ì‹¬ì‚¬ì´ë¯€ë¡œ â†’ ì—†ì–´ì§„ íš¡ë‹¨ ê´€ì‹¬ì‚¬ëŠ” MyAspect.javaê°€ ì²˜ë¦¬í•¨
    
    ë¹¨ê°„ìƒ‰ ë¶€ë¶„ì´ ì¶”ê°€ëœ ì´ìœ  : ìŠ¤í”„ë§ AOPê°€ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ì´ë¯€ë¡œ ê·¸ ìš”ê±´ ì¶©ì¡± ìœ„í•´
    
- <aop:aspectj-autoproxy /> : ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ê²Œ AOPí”„ë¡ì‹œ ì‚¬ìš©í•˜ë¼ê³  ì•Œë ¤ì£¼ëŠ” ì§€ì‹œì
    
    â†’   í”„ë¡ì‹œ íŒ¨í„´ì„ ì´ìš©í•´ íš¡ë‹¨ê´€ì‹¬ì‚¬ë¥¼ í•µì‹¬ ê´€ì‹¬ì‚¬ì— ì£¼ì…í•˜ëŠ” ê²ƒ
    
    í˜¸ì¶œí•˜ëŠ” ìª½ê³¼ í˜¸ì¶œë‹¨í•˜ëŠ” ìª½ ëª¨ë‘ í”„ë¡ì‹œê°€ ì¡´ì¬í•˜ëŠ” ì§€ ëª¨ë¦„, ì˜¤ì§ ìŠ¤í”„ë§ë§Œ ì•ˆë‹¤.
    
- ìŠ¤í”„ë§ AOPì˜ í•µì‹¬ ì„¸ê°€ì§€
    1. ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ / 2. í”„ë¡ì‹œ ê¸°ë°˜ / 3.ëŸ°íƒ€ì„ ê¸°ë°˜

### ğŸ“ŒAOP ìš©ì–´í¸ ( 5ê°€ì§€ ìš©ì–´ ì™€ í”„ë¡ì‹œ )

  : Aspect , Advisor , Advice , JoinPoint , Pointcut

```jsx
package aop002;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class MyAspect {
	@Before("execution(* runSomething())")
	public void before(JoinPoint joinPoint) {
		System.out.println("ì–¼êµ´ ì¸ì‹ í™•ì¸: ë¬¸ì„ ê°œë°©í•˜ë¼");
		// System.out.println("ì—´ì‡ ë¡œ ë¬¸ì„ ì—´ê³  ì§‘ì— ë“¤ì–´ê°„ë‹¤.");
	}
}
```

  1) Pointcut : ìë¥´ëŠ” ì§€ì  â†’ Aspect ì ìš© ì§€ì •ì 

- Pointcutì˜ í‘œí˜„ì‹
    
    [ì ‘ê·¼ì œí•œìíŒ¨í„´] **ë¦¬í„´íƒ€ì…íŒ¨í„´** [ íŒ¨í‚¤ì§€&í´ë˜ìŠ¤ íŒ¨í„´ .] **ë©”ì„œë“œì´ë¦„íŒ¨í„´(íŒŒë¼ë¯¸í„°íŒ¨í„´)** [throws ì˜ˆì™¸íŒ¨í„´ ]
    
    ğŸ‘‰Â PCD ( PointCut Designator ) 
    
    PCDëŠ” íƒ€ê¹ƒì˜ ì—¬ëŸ¬ Joinpoint ì¤‘ì— Adviceë¥¼ ì–´ë””ì— ì ìš©ì„ ì‹œí‚¬ì§€ AOPì—ê²Œ ì•Œë ¤ì£¼ëŠ” í‚¤ì›Œë“œ 
    
    1) excution : Adviceë¥¼ ì ìš©í•  ë©”ì„œë“œë¥¼ ëª…ì‹œí•  ë•Œ ì‚¬ìš© â†’ ê°€ì¥ ì •êµí•œ PointCutë§Œë“¤ìˆ˜ O
    
    ex. 
    
    execution(* aop002..Something*.*(..))
    
    - aop002 íŒ¨í‚¤ì§€ ë° í•˜ìœ„ íŒ¨í‚¤ì§€ì— ì†í•´ìˆê³ , ì´ë¦„ì´ Somethingìœ¼ë¡œ ëë‚˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ íŒŒë¼ë¯¸í„°ê°€ 0ê°œ ì´ìƒì¸ ëª¨ë“  ë©”ì„œë“œ
    
    execution(* run*(*, *))
    
    - ë©”ì„œë“œ ì´ë¦„ì´ runìœ¼ë¡œ ì‹œì‘í•˜ê³  íŒŒë¼ë¯¸í„°ê°€ 2ê°œì¸ ëª¨ë“  ë©”ì„œë“œ
    
    2) within : excutionê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ,Â withinì€ ë©”ì„œë“œê°€ ì•„ë‹ˆë¼ íŠ¹ì • íƒ€ì…ì— ì†í•œ ë©”ì„œë“œë¥¼ Pointcutìœ¼ë¡œ ì„¤ì •í•  ë•Œ ì‚¬ìš©  
    
    ex. 
    
    within( aop002..*)
    
    - aop002 íŒ¨í‚¤ì§€ ë° í•˜ìœ„ íŒ¨í‚¤ì§€ì˜ ëª¨ë“  ë©”ì„œë“œ
    
    3) bean : ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„ì„ ì´ìš©í•˜ì—¬ Pointcut ì •ì˜ â†’ìŠ¤í”„ë§ 2.5 ë²„ì „ë¶€í„° ì œê³µí•˜ëŠ” ëª…ì‹œì
    
    Â 
    
     ğŸ‘‰Â í‘œí˜„ì‹ ì—°ê²° : '&&' ë‚˜ '||' ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ì—°ê²° ê°€ëŠ¥
    
    ex1.)
    
    @Before("execution(* runSomething())â€ || â€œexecution(* runAnything())")
    
    public void runEverything(JoinPoint joinPoint){
    
    }
    
    ex2.) XMLíŒŒì¼ì˜ ê²½ìš°, and / or ë¡œ ì“°ëŠ” ê²ƒë„ ê°€ëŠ¥
    
- ex. @Before(â€execution( * runSomething())â€ ) : public void before(ì§€ê¸ˆ ì„ ì–¸í•˜ëŠ” ë©”ì„œë“œ) ë¥¼ *runSomething()ì´ ì‹¤í–‰ë˜ê¸°ì „(@Before)ì— ì‹¤í–‰í•˜ë¼ëŠ” ì˜ë¯¸
    
    public void before â†’ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ë©”ì„œë“œ
    
- íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ì ìš©í•  íƒ€ê¹ƒ ë©”ì„œë“œë¥¼ ì„ íƒí•˜ëŠ” ì§€ì‹œìì„

   2) Joinpoint : ì—°ê²°ê°€ëŠ¥í•œ ì§€ì    

- ê´‘ì˜ì˜ JoinPoint : Aspect ì ìš©ì´ ê°€ëŠ¥í•œ ëª¨ë“  ì§€ì 
- í˜‘ì˜ì˜ JoinPoint : í˜¸ì¶œëœ ê°ì²´ì˜ ë©”ì„œë“œ

   3) Advice : Pointcutì— ì–¸ì œ, ë¬´ì—‡ì„ ì ìš©í• ì§€ ì •ì˜í•œ ë©”ì„œë“œ

- ex. Pointcutì´ ì‹œì‘ë˜ê¸° ì „ ( @Before )ì— before () ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë¼ê³  ë˜ì–´ ìˆìŒ

   4) Aspect : ì—¬ëŸ¬ ê°œì˜ Advice ì™€ ì—¬ëŸ¬ê°œì˜ Pointcutì˜ ê²°í•©ì²´ë¥¼ ì˜ë¯¸í•˜ëŠ” ìš©ì–´

- Advice(ì–¸ì œ, ë¬´ì—‡ì„) + Pointcut (ì–´ë””ì—) â†’ ì–¸ì œ, ì–´ë””ì„œ , ë¬´ì—‡ì„
- ex. Pointcutì¸ public void aop002.Boy.runSomething()ë©”ì„œë“œê°€ ì‹œì‘ë˜ê¸°ì „(@Before)ì— before() ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë¼

   5) Advisor = í•œê°œì˜ Advice + í•œê°œì˜ Pointcut

- ìŠ¤í”„ë§ AOPì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ â†’ ìŠ¤í”„ë§ ë²„ì „ì´ ì˜¬ë¼ê°€ë©° ì´ì œëŠ” ì“°ì§€ë§ë¼ê³  ê¶Œê³ í•˜ëŠ” ê¸°ëŠ¥

- ğŸ“Œ**ì£¼ì…ì‹œì  ì„¤ì •**
    1. AfterReturning 
        
        ë°˜ë“œì‹œ í•µì‹¬ ë©”ì„œë“œ í˜¸ì¶œì´ **ì„±ê³µ**í–ˆì„ ë•Œ ë°˜í™˜í•˜ëŠ” ë©”ì„œë“œì¼ ë•Œ @AfterReturning ì‚¬ìš©
        
        ì—ëŸ¬(Exception)ê°€ ë°œìƒí–ˆë‹¤ë©´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ â†’ ì‹¤í–‰ì‹œì ì€ í•µì‹¬ ë©”ì„œë“œê°€ í˜¸ì¶œëœ í›„
        
    2. AfterThrowing
        
        ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œë§Œ ì‹¤í–‰ë˜ëŠ” ê³µí†µ ë©”ì„œë“œë¥¼ ì§€ì •í•  ë•Œ @AfterThrowing ì‚¬ìš©
        
        í•µì‹¬ ê¸°ëŠ¥ ì˜ˆì™¸ë¥¼ ì¸ì§€í–ˆì„ ë•Œ ì‹¤í–‰ë˜ë¯€ë¡œ, ì‹¤í–‰ì‹œì ì€ ì˜ˆì™¸ syntaxê°€ ì¶œë ¥ë˜ê¸° ì „
        
    3. Around
        
        -Adviceê°€ íƒ€ê²Ÿ ë©”ì†Œë“œë¥¼ ê°ì‹¼ë‹¤ â†’ ë©”ì†Œë“œ ì‹¤í–‰ ì „ í›„ ëª¨ë‘ì—ì„œ ë™ì‘ê°€ëŠ¥, ì˜ˆì™¸ë°œìƒí•˜ë”ë¼ë„ ì‹¤í–‰ë¨
        
        -ì§€ì‹œì(ë©”ì„œë“œ)ì˜ ë§¤ê°œ ë³€ìˆ˜ë¥¼ JoinPointê°€ ì•„ë‹Œ **ProceedingJoinPoint**ë¥¼ ì‚¬ìš©
        
        - ğŸ‘‰JoinPoint vs ProceedingJoinPoint
            - **JoinPoint**
                
                : Spring AOP ê°€ ì ìš©ë˜ëŠ” ì§€ì  ëœ»í•¨â†’ìŠ¤í”„ë§ AOPì—ì„œ Joinpoint: ë©”ì†Œë“œ ì‹¤í–‰ì„ ë‚˜íƒ€ë‚¸ë‹¤
                
                - JoinPoint ê°ì²´ ì‚¬ìš©ì‹œ, ì–´ë“œë°”ì´ìŠ¤ ë©”ì†Œë“œ ë§¤ê°œë³€ìˆ˜ë¡œ ì„ ì–¸ í•˜ë©´ ëœë‹¤.
                    
                    â†’ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ JoinPoint ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ë©”ì†Œë“œ í˜¸ì¶œ ê´€ë ¨ ì •ë³´ë¥¼ JoinPoint ê°ì²´ì— ì €ì¥í•˜ì—¬ ì–´ë“œë°”ì´ìŠ¤ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì¸ìë¡œ ë„˜ê²¨ì¤Œ
                    
            - **ProceedingJoinPoint**
                
                 : JoinPointì˜ í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ,  JoinPointê°€ ê°€ì§„ ëª¨ë“  ë©”ì†Œë“œë¥¼ ì§€ì›í•˜ë©° proceed() ë©”ì†Œë“œë¥¼ ì¶”ê°€
                
                - proceed() ë©”ì„œë“œëŠ” í•µì‹¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê¸°ëŠ¥
                
            - @Around ì— ProceedingJoinPointë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ 
                - @Around
                    
                     -ë©”ì„œë“œ í˜¸ì¶œ ì „í›„ì— ìˆ˜í–‰. ê°€ì¥ ê°•ë ¥í•œ ì–´ë“œë°”ì´ì €. ì¡°ì¸ í¬ì¸íŠ¸ ì‹¤í–‰ì—¬ë¶€, ë°˜í™˜ ê°’ ë³€í™˜, ì˜ˆì™¸ ë³€í™˜ ë“± ê°€ëŠ¥
                    
                    - @Around**ëŠ” JoinPoint**ë¥¼ ê°œë°œìê°€ **ì§ì ‘ ì‹¤í–‰**ì„ í•´ì¤˜ì•¼ë§Œ **í•œë‹¤ëŠ” ê²ƒì´ê³ , ë‚˜ë¨¸ì§€ ì–´ë“œë°”ì´ìŠ¤ëŠ” ìë™ìœ¼ë¡œ JoinPointê°€ ì‹¤í–‰ëœë‹¤ëŠ” ì ì´ ê°€ì¥ í° ì°¨ì´ì **
        
        ex. ì¶œì²˜ :https://klyhyeon.tistory.com/74
        
        ```jsx
        @Around("execution(* runSomething())")
            public void around(ProceedingJoinPoint pjp) {
                //before
                System.out.println("ì˜·ì„ ê°ˆì•„ì…ëŠ”ë‹¤.");
                try {            
                    pjp.proceed(); //í•µì‹¬ ê¸°ëŠ¥ í˜¸ì¶œ
                } catch (Throwable e) {
                    e.printStackTrace();
                }
                //after
                System.out.println("ì”»ëŠ”ë‹¤.");
            }
        ```
        

[https://sup2is.tistory.com/59](https://sup2is.tistory.com/59)

### ğŸ“ŒÂ POJOì™€ XML ê¸°ë°˜ AOP

- MyAspect.javaì˜ ì–´ë…¸í…Œì´ì…˜ë“¤ì´ ì‚¬ë¼ì§€ê³ , XMLíŒŒì¼ì´ ë³€ê²½ë¨

```jsx
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
	<aop:aspectj-autoproxy />	
	
	<bean id="myAspect" class="aop003.MyAspect" />
	<bean id="boy" class="aop003.Boy" />
	<bean id="girl" class="aop003.Girl" />
	
	<aop:config>
		<aop:aspect ref="myAspect">			
			<aop:before method="before" pointcut="execution(* runSomething())" />
		</aop:aspect>
	</aop:config>
</beans>
```

### ğŸ“ŒÂ  After ì–´ë“œë°”ì´ìŠ¤ ì‹œ ì¤‘ë³µì œê±°

    1) POJO & XML ê¸°ë°˜

```jsx
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
	<aop:aspectj-autoproxy />	
	
	<bean id="myAspect" class="aop004.MyAspect" />
	<bean id="boy" class="aop004.Boy" />
	<bean id="girl" class="aop004.Girl" />
	
	<aop:config>
		<aop:pointcut expression="execution(* runSomething())" id="iampc"/>
		
		<aop:aspect ref="myAspect">			
			<aop:before method="before" pointcut-ref="iampc" />
			<aop:after method="lockDoor" pointcut-ref="iampc" />
		</aop:aspect>
	</aop:config>
</beans>
```

2) ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜

```jsx
package aop006;

import org.aspectj.lang.JoinPoint;
import org.aspectj.lang.annotation.After;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;
import org.springframework.stereotype.Component;

@Component
@Aspect
public class MyAspect {
	@Pointcut("execution(* runSomething())")
	private void iampc() {
		// ì—¬ê¸´ ë¬´ì—‡ì„ ì‘ì„±í•´ë„ ì˜ë¯¸ê°€ ì—†ì–´ìš”.
	}

	@Before("iampc()")
	public void before(JoinPoint joinPoint) {
		System.out.println("ì–¼êµ´ ì¸ì‹ í™•ì¸: ë¬¸ì„ ê°œë°©í•˜ë¼");
	}

	@After("iampc()")
	public void lockDoor(JoinPoint joinPoint) {
		System.out.println("ì£¼ì¸ë‹˜ ë‚˜ê°”ë‹¤: ì–´ì´ ë¬¸ ì ê°€!!!");
	}
}
```

### ğŸ“ŒÂ PSA - ì¼ê´€ì„± ìˆëŠ” ì„œë¹„ìŠ¤ ì¶”ìƒí™”

- ì„œë¹„ìŠ¤ ì¶”ìƒí™” : ì–´ëŒ‘í„° íŒ¨í„´ì„ ì ìš©í•´ ê°™ì€ ì¼ì„ í•˜ëŠ” ë‹¤ìˆ˜ì˜ ê¸°ìˆ ì„ ê³µí†µì˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œì–´í•  ìˆ˜ ìˆê²Œ í•œ ê²ƒ
- ìŠ¤í”„ë§ í”„ë ˆì„ ì›Œí¬ì—ì„œëŠ” ì„œë¹„ìŠ¤ ì¶”ìƒí™”ë¥¼ ìœ„í•´ ë‹¤ì–‘í•œ ì–´ëŒ‘í„° ì œê³µí•¨
    
    ex. OXM - Castor, JAXB, XMLBeansâ€¦